{% extends "base.html" %}

{% block content %}
  <div class="my-16 px-2 flex flex-col justify-center max-w-5xl mx-auto sm:px-0">
    <div class="flex flex-col gap-1">
      <h1 class="text-2xl font-bold">Settings</h1>
      <p class="text-foreground/80">Manage your account settings.</p>
    </div>
    <div class="separator my-6"></div>
    <div class="flex flex-col gap-6 md:flex-row">
      <div class="flex overflow-hidden sm:overflow-visible md:w-1/3">
        <aside class="w-full flex gap-0.5 p-1 overflow-x-scroll md:flex-col md:overflow-x-auto">
          <a href="{% url 'my_account' %}" data-tab="account" class="tab-item">
            Account
          </a>
          <a href="{% url 'account_email' %}" data-tab="email" class="tab-item">
            Email
          </a>
          <a href="{% url 'account_security' %}" data-tab="security" class="tab-item">
            Password and Authentication
          </a>
          <a href="{% url 'links' %}" data-tab="links" class="tab-item">
            Links
          </a>
        </aside>
      </div>
      <div class="flex flex-col size-full">
        <div class="flex flex-col gap-1">
          <h2 class="text-xl font-bold">
            {% block tab_title %}{% endblock tab_title %}
          </h2>
          <p class="text-foreground/80">
            {% block tab_description %}{% endblock tab_description %}
          </p>
        </div>
        <div class="separator w-full mt-5 mb-7"></div>
        {% block tab_content %}{% endblock tab_content %}
      </div>
    </div>
  </div>
{% endblock content %}

{% block js %}
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const tabs = document.querySelectorAll("[data-tab]");
    tabs.forEach((tab) => {
      let pathname = window.location.pathname.split("/");
      pathname.pop();
      pathname = pathname.length === 3 ? pathname[2] : pathname[1];
      const tabValue = tab.getAttribute("data-tab");
      const isSelected = tabValue.includes(pathname);
      if (isSelected) {
        tab.setAttribute("data-selected", "true");
      };
    });
  });
</script>
{% endblock js %}
